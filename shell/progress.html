<!doctype html>
<title>bowery</title>
<meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
<link rel="stylesheet" href="progress.css">
<script src="https://js.pusher.com/2.2/pusher.min.js"></script>
<script src="progress.js"></script>
<div class="container">
  <h1>BOWERY</h1>
  <p class="progress-error hidden"></p>
  <p class="progress-description">initializing</p>
  <div class="progress-wrapper">
    <span class="progress-bar"></span>
  </div>
</div>
<script>
function qmark (name) {
  var queryString = {}
  window.location.href.replace(
    new RegExp("([^?=&]+)(=([^&]*))?", "g"),
    function($0, $1, $2, $3) { queryString[$1] = $3 }
  )
  return name ? queryString[name] : queryString
}

var ipc = require('ipc')
var pusher = new Pusher('bbdd9d611b463822cf6e')
var type = qmark('type')
var containerId = qmark('container_id')

var pm = new ProgressManager(containerId, type)
pm.init()
ipc.on('error', pm.showError)
</script>
